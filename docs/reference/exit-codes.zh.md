# 退出码

clinvk 退出码及其含义参考。

## 退出码汇总

| 代码 | 名称 | 描述 |
|------|------|------|
| 0 | 成功 | 命令成功完成 |
| 1 | 一般错误 | 一般错误或失败 |
| 2 | 用法错误 | 命令行用法错误 |
| 126 | 后端不可用 | 后端 CLI 不可用 |
| 127 | 后端未找到 | 后端 CLI 未在 PATH 中找到 |

## 详细说明

### 0 - 成功

命令成功完成。

```bash
clinvk "hello world"
echo $?  # 0
```

### 1 - 一般错误

执行期间发生一般错误：

- 后端执行失败
- 网络错误
- 超时
- 无效输入

### 2 - 用法错误

无效的命令行参数或标志：

```bash
clinvk --invalid-flag "提示"
echo $?  # 2
```

### 126 - 后端不可用

后端已配置但当前不可用（如 API 关闭）。

### 127 - 后端未找到

后端的 CLI 工具未安装或不在 PATH 中。

## 命令特定退出码

### parallel

| 代码 | 描述 |
|------|------|
| 0 | 所有任务成功 |
| 1 | 一个或多个任务失败 |

### compare

| 代码 | 描述 |
|------|------|
| 0 | 至少一个后端成功 |
| 1 | 所有后端失败 |

### chain

| 代码 | 描述 |
|------|------|
| 0 | 所有步骤成功 |
| 1 | 某个步骤失败 |

### serve

| 代码 | 描述 |
|------|------|
| 0 | 正常关闭 (SIGINT/SIGTERM) |
| 1 | 服务器错误 |

## 脚本示例

### 检查成功

```bash
if clinvk "实现功能"; then
  echo "成功"
else
  echo "失败"
fi
```

### 处理特定代码

```bash
clinvk -b codex "提示"
code=$?

case $code in
  0)
    echo "成功"
    ;;
  126)
    echo "后端不可用，尝试另一个..."
    clinvk -b claude "提示"
    ;;
  127)
    echo "Codex 未安装"
    ;;
  *)
    echo "错误：$code"
    ;;
esac
```

## 另请参阅

- [命令参考](commands/index.md)
- [故障排除](../appendix/troubleshooting.md)
